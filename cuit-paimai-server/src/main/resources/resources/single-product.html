<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Product Page - Ustora Demo</title>

    <!-- Google Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,700,600' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="css/menulist.css" rel="stylesheet">
    <link href="layui/css/layui.css" rel="stylesheet">
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <script src="/jquery/jquery.js"></script>

</head>
<style>
    .attrabute {
        padding: 10px 10px 10px 10px;
    }
</style>
<body>
<!--头部内容-->
<div data-th-insert="~{header :: cuit_header}"></div>
<!--搜索框和菜单栏-->
<div data-th-insert="~{bodytop :: cuit_bodytop}"></div>

<div class="product-big-title-area">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="product-bit-title text-center">
                    <h2>Shop</h2>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="single-product-area">
    <div class="zigzag-bottom"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="product-content-right">
                    <div class="product-breadcroumb">
                        <a href="/">首页</a>
                        <a href="/shop">商品</a>
                        <a href="" data-th-href="@{/single-product(id=${commodity.id})}"
                           data-th-text="${commodity.name}">Sony Smart TV - 2015</a>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="product-images">
                                <div class="product-main-img">
                                    <img src="img/product-2.jpg" alt=""
                                         data-th-src="@{/cuitfile/download(fileName=${commodity.picture},id=1)}">
                                </div>
                                <div class="product-gallery">
                                    <img src="img/product-thumb-1.jpg" alt="">
                                    <img src="img/product-thumb-2.jpg" alt="">
                                    <img src="img/product-thumb-3.jpg" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="product-inner">
                                <h2 class="product-name" data-th-text="${commodity.name}">Sony Smart TV - 2015</h2>
                                <div class="product-inner-price">
                                    <span>当前价格:</span>
                                    <ins data-th-text="${commodity.presentPrice}">$700.00</ins>
                                </div>
                                <div class="product-inner-price">
                                    <span>结束时间:</span>
                                    <ins data-th-text="${commodity.endTime}">$700.00</ins>
                                </div>
                                <form action="" class="cart">
                                    <div class="quantity">
                                        <input id="bid_price" style="width: 100px" type="number" size="10" class="input-text qty text"
                                               title="Qty" value="1"
                                               name="quantity" min="1" step="1"
                                               data-th-attr="value=${commodity.presentPrice}+${attribute.bidIncrement},min=${commodity.presentPrice}+${attribute.bidIncrement},step=${attribute.bidIncrement}"
                                        >
                                    </div>
                                    <button class="add_to_cart_button" type="button" onclick="bidCommodity()">出价
                                    </button>
                                    <span data-th-text="'你已经提交保证金'+${bidDao.bidPrice}" data-th-if="${bid} == true"
                                          style="font-size: small;color: #5e5e5e"></span>
                                </form>
                                <div class="row" style="margin-bottom: 150px">
                                    <div class="col-sm-4">
                                        <div class="row attrabute">
                                            起拍价：<span data-th-text="'￥'+${attribute.upsetPrice}">无</span>
                                        </div>
                                        <div class="row attrabute">
                                            佣金：<span data-th-text="'￥'+${attribute.commission}">无</span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="row attrabute">
                                            加价幅度：<span data-th-text="'￥'+${attribute.bidIncrement}">无</span>
                                        </div>
                                        <div class="row attrabute">
                                            延时周期：<span data-th-text="${attribute.delayPeriod}+'h'">无</span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="row attrabute">
                                            保证金：<span data-th-text="'￥'+${attribute.cashDeposit}">无</span>
                                        </div>
                                        <div class="row attrabute">
                                            保留价格：<span data-th-text="'￥'+${attribute.reservePrice}">无</span>
                                        </div>
                                    </div>
                                </div>
                                <div role="tabpanel">
                                    <ul class="product-tab" role="tablist">
                                        <li role="presentation" class="active"><a href="#home" aria-controls="home"
                                                                                  role="tab" data-toggle="tab">商品描述</a>
                                        </li>
                                        <li role="presentation"><a href="#profile" aria-controls="profile" role="tab"
                                                                   data-toggle="tab">反馈</a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane fade in active" id="home">
                                            <div class="row">
                                                <div class="col-sm-6 attrabute" data-th-each="describe : ${describes}">
                                                    <span data-th-text="${describe.name}+':'">描述：</span>
                                                    <span data-th-text="${describe.describe}">无</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div role="tabpanel" class="tab-pane fade" id="profile">
                                            <h2>信息填写</h2>
                                            <div class="submit-review">
                                                <p><label for="name">名字</label> <input id="name" name="name"
                                                                                       type="text"></p>
                                                <p><label for="email">邮箱</label> <input id="email" name="email"
                                                                                        type="email">
                                                </p>
                                                <div class="rating-chooser">
                                                    <p>评分</p>

                                                    <div class="rating-wrap-post">
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                    </div>
                                                </div>
                                                <p><label for="review">反馈信息</label> <textarea name="review" id=""
                                                                                              cols="30"
                                                                                              rows="10"></textarea>
                                                </p>
                                                <p><input type="submit" value="提交"></p>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="list-group">
                    <button style="width:100%" type="button" class="list-group-item list-group-item-action active">
                        出价记录
                    </button>
                    <button style="width:100%" type="button" data-th-each="list : ${bidHistory.content}"
                            class="list-group-item list-group-item-action">
                        <span data-th-text="${list.cuitUserName}+'——'+${list.endPrice}+'￥'+'——'+${list.endTime}">没有出价记录</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div data-th-insert="~{index :: cuit_footer}"></div>

<!-- Latest jQuery form server -->
<script src="https://code.jquery.com/jquery.min.js"></script>

<!-- jQuery sticky menu -->
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.sticky.js"></script>

<!-- jQuery easing -->
<script src="js/jquery.easing.1.3.min.js"></script>
<!-- Latest jQuery form server -->
<script src="https://code.jquery.com/jquery.min.js"></script>

<!-- Bootstrap JS form CDN -->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<!-- jQuery sticky menu -->
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.sticky.js"></script>

<!-- jQuery easing -->
<script src="js/jquery.easing.1.3.min.js"></script>

<!-- Main Script -->
<script src="js/main.js"></script>

<!-- Slider -->
<script type="text/javascript" src="js/bxslider.min.js"></script>
<script type="text/javascript" src="js/script.slider.js"></script>
<script type="text/javascript" src="js/menulist.js"></script>
<!--my js-->
<script type="text/javascript" src="js/index.js"></script>
<!-- Main Script -->
<script src="js/main.js"></script>
<!-- Bootstrap JS form CDN -->
<script src="bootstrap/js/bootstrap.js"></script>
<!--自己引入组件-->
<script src="jquery/jquery.js"></script>
<script src="layui/layui.js"></script>
<script data-th-inline="javascript">
    layui.use(['layer', 'form', 'element'], function () {
    });

    function bidCommodity() {
        if ([[${bid}]] == true) {
            layer.confirm('您确定出价？', {
                btn: ['确定', '取消'] //按钮
            }, function () {
                var params = {
                    cuitCommodityId: [[${commodity.id}]],
                    cuitUserName: [[${user.userName}]],
                    endPrice: $("#bid_price").val(),
                    price: [[${commodity.presentPrice}]],
                    type: "1",
                    userId: [[${user.id}]]
                };
                $.ajax({
                    type: "post",
                    async: false,
                    url: "/cuitBidHistory",
                    data: JSON.stringify(params),
                    contentType: 'application/json',
                    dataType: "json",
                    success: function (result, status, xhr) {
                        layer.msg('出价成功');
                    },
                    error: function (xhr, status, error) {
                        layer.confirm('出价失败:' + xhr.responseText);
                        return
                    }
                });
                $.ajax({
                    type: "post",
                    async: false,
                    url: "/cuitCommodity/updateById",
                    data: {
                        presentPrice:$("#bid_price").val(),
                        id:[[${commodity.id}]]
                    },
                    dataType: "json",
                    success: function (result, status, xhr) {
                        console.log("修改价格成功");
                    },
                    error: function (xhr, status, error) {
                        console.log("修改价格成功"+ xhr.responseText);
                    }
                });
            }, function () {
                layer.msg('也可以这样', {
                    time: 20000, //20s后自动关闭
                    btn: ['明白了', '知道了']
                });
            });
        }
        else {
        }
    }
</script>
</body>
</html>