<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>用户详情</title>
</head>
<!-- Google Fonts -->
<link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,700,600' rel='stylesheet'
      type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>
<!-- Bootstrap -->
<link rel="stylesheet" href="css/bootstrap.min.css">

<!-- Font Awesome -->
<link rel="stylesheet" href="css/font-awesome.min.css">

<!-- Custom CSS -->
<link rel="stylesheet" href="css/owl.carousel.css">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="css/responsive.css">
<link href="css/menulist.css" rel="stylesheet">
<link href="layui/css/layui.css" rel="stylesheet">
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<body>
<!--头部内容-->
<div data-th-insert="~{header :: cuit_header}"></div>
<div class="product-big-title-area">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="product-bit-title text-center">
                    <h2>个人中心</h2>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-2" data-th-fragment="cuit_menu">
        <ul class="layui-nav layui-nav-tree" lay-filter="test">
            <li class="layui-nav-item layui-nav-itemed">
                <a href="javascript:;">个人中心</a>
                <dl class="layui-nav-child">
                    <dd><a href="/userinfo">个人信息</a></dd>
                    <dd><a href="/car">参拍宝贝</a></dd>
                    <dd><a href="/money">个人财产</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">消息中心</a>
                <dl class="layui-nav-child">
                    <dd><a href="/car">未读消息</a></dd>
                    <dd><a href="/car">历史消息</a></dd>
                </dl>
            </li>
        </ul>
    </div>
    <div class="col-md-6">
        <form class="layui-form" action="">
            <div class="layui-form-item">
                <label class="layui-form-label">用户名</label>
                <div class="layui-input-block">
                    <input type="text" name="id" style="display: none">
                    <input type="text" name="name" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">密码</label>
                <div class="layui-input-inline" style="margin-left: 30px">
                    <input type="password" name="password" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">邮箱</label>
                <div class="layui-input-block">
                    <input type="text" name="email" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">电话</label>
                <div class="layui-input-block">
                    <input type="text" name="mobile" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">爱好</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="like[write]" title="图画">
                    <input type="checkbox" name="like[read]" title="汽车" checked>
                    <input type="checkbox" name="like[dai]" title="玉石">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                    <input type="radio" name="sex" value="男" title="男">
                    <input type="radio" name="sex" value="女" title="女" checked>
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">个人描述</label>
                <div class="layui-input-block">
                    <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo">提交修改</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>
    <div class="col-md-2"></div>
</div>

</body>
<!--自己引入组件-->
<script src="jquery/jquery.js"></script>
<script src="layui/layui.js"></script>

<!-- Latest jQuery form server -->
<script src="https://code.jquery.com/jquery.min.js"></script>

<!-- Bootstrap JS form CDN -->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<!-- jQuery sticky menu -->
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.sticky.js"></script>

<!-- jQuery easing -->
<script src="js/jquery.easing.1.3.min.js"></script>

<!-- Main Script -->
<script src="js/main.js"></script>

<!-- Slider -->
<script type="text/javascript" src="js/bxslider.min.js"></script>
<script type="text/javascript" src="js/script.slider.js"></script>
<script type="text/javascript" src="js/menulist.js"></script>
<script data-th-inline="javascript">
    layui.use(['layer', 'form', 'element'], function(){
        var element = layui.element,form = layui.form;
        //一些事件监听
        element.on('tab(demo)', function(data){
            console.log(data);
        });
        //监听提交
        form.on('submit(formDemo)', function(data){
            var formdata = new Object();
            formdata.id = $("[name='id']").val();
            formdata.name = $("[name='name']").val();
            formdata.passWord = $("[name='password']").val();
            formdata.mobile = $("[name='mobile']").val();
            formdata.email = $("[name='email']").val();
            formdata.sex = $("input[name='sex']:checked").val();
            formdata.type = "user";
            formdata = JSON.stringify(formdata);
            $.ajax({
                type: "put",
                async: false,
                url: "/cuitAdmin",
                data: formdata,
                contentType:'application/json',
                dataType: "json",
                success: function (result,status,xhr) {
                    layer.confirm('更新成功');
                },
                error: function (xhr,status,error) {
                    layer.confirm('更新失败:'+xhr.responseText);
                }
            });
            return false;
        });
        $.ajax({
            type: "get",
            async: false,
            url: "/cuitAdmin",
            data: {name:[[${session.username}]]},
            success: function (result,status,xhr) {
                $("[name='id']").val(result.content[0].id);
                $("[name='name']").val(result.content[0].name);
                $("[name='password']").val("");
                $("[name='mobile']").val(result.content[0].mobile);
                $("[name='email']").val(result.content[0].email);
                if(result.content[0].sex=='男'){
                    $("[name='sex']:first").attr('checked', 'checked');
                    form.render();
                }
                else{
                    $("[name='sex']:last").attr('checked', 'checked');
                    form.render();
                }
            },
            error: function (xhr,status,error) {
                layer.confirm("获取信息错误");
            }
        });


    });
</script>
</html>